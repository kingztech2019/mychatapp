(this.webpackJsonpchatweb=this.webpackJsonpchatweb||[]).push([[0],{287:function(e,a,t){e.exports=t(570)},291:function(e,a,t){},535:function(e,a,t){},564:function(e,a){},570:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(4),l=t.n(s),i=(t(291),t(58)),o=t(179),c=t.n(o),m=t(34),u=t.n(m);function d(){return{type:"auth_user",payload:u.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var p=t(27),h=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function s(s){var l=Object(p.d)((function(e){return e.user})),i=Object(p.c)();return Object(r.useEffect)((function(){i(d()).then((function(e){return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(!e.payload.isAuth);case 2:if(!r.sent){r.next=6;break}a&&s.history.push("/login"),r.next=7;break;case 6:t&&!e.payload.isAdmin?s.history.push("/"):!1===a&&s.history.push("/");case 7:case"end":return r.stop()}}))}))}),[i,s.history,l.googleAuth]),n.a.createElement(e,Object.assign({},s,{user:l}))}return s},g=t(281);var E=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"app"},n.a.createElement(g.a,{style:{fontSize:"4rem"}}),n.a.createElement("br",null),n.a.createElement("span",{style:{fontSize:"2rem"}},"Let's Start Chatting")),n.a.createElement("div",{style:{float:"right"}},"This website is design by Falore Oluwajuwon"))},f=t(102),y=t(136),b=t(32),v=t(575),w=t(576),x=t(580),N=t(8),O=t(578),S=t(185),I=v.a.Title;var k=Object(i.f)((function(e){var a=Object(p.c)(),t=!!localStorage.getItem("rememberMe"),s=Object(r.useState)(""),l=Object(f.a)(s,2),i=l[0],o=l[1],c=Object(r.useState)(t),m=Object(f.a)(c,2),d=m[0],h=m[1],g=function(){h(!d)},E=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return n.a.createElement(y.a,{initialValues:{email:E,password:""},validationSchema:b.object().shape({email:b.string().email("Email is invalid").required("Email is required"),password:b.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(t,r){var n=r.setSubmitting;setTimeout((function(){var r={email:t.email,password:t.password};a(function(e){return{type:"login_user",payload:u.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(r)).then((function(a){a.payload.loginSuccess?(window.localStorage.setItem("userId",a.payload.userId),!0===d?window.localStorage.setItem("rememberMe",t.id):localStorage.removeItem("rememberMe"),e.history.push("/chat")):o("Check out your Account or Password again")})).catch((function(e){o("Check out your Account or Password again"),setTimeout((function(){o("")}),3e3)})),n(!1)}),500)}},(function(e){var a=e.values,t=e.touched,r=e.errors,s=(e.dirty,e.isSubmitting),l=e.handleChange,o=e.handleBlur,c=e.handleSubmit;e.handleReset;return n.a.createElement("div",{className:"app"},n.a.createElement(I,{level:2},"Log In"),n.a.createElement("form",{onSubmit:c,style:{width:"350px"}},n.a.createElement(w.a.Item,{required:!0},n.a.createElement(x.a,{id:"email",prefix:n.a.createElement(N.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:a.email,onChange:l,onBlur:o,className:r.email&&t.email?"text-input error":"text-input"}),r.email&&t.email&&n.a.createElement("div",{className:"input-feedback"},r.email)),n.a.createElement(w.a.Item,{required:!0},n.a.createElement(x.a,{id:"password",prefix:n.a.createElement(N.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:a.password,onChange:l,onBlur:o,className:r.password&&t.password?"text-input error":"text-input"}),r.password&&t.password&&n.a.createElement("div",{className:"input-feedback"},r.password)),i&&n.a.createElement("label",null,n.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},i)),n.a.createElement(w.a.Item,null,n.a.createElement(O.a,{id:"rememberMe",onChange:g,checked:d},"Remember me"),n.a.createElement("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"}},"forgot password"),n.a.createElement("div",null,n.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:s,onSubmit:c},"Log in")),"Or ",n.a.createElement("a",{href:"/register"},"register now!"))))}))})),C=t(35),_=t.n(C),j={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},D={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var M=function(e){var a=Object(p.c)();return n.a.createElement(y.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:b.object().shape({name:b.string().required("Name is required"),lastName:b.string().required("Last Name is required"),email:b.string().email("Email is invalid").required("Email is required"),password:b.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:b.string().oneOf([b.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(t,r){var n=r.setSubmitting;setTimeout((function(){var r={email:t.email,password:t.password,name:t.name,lastname:t.lastname,image:"http://gravatar.com/avatar/".concat(_()().unix(),"?d=identicon")};a(function(e){return{type:"register_user",payload:u.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(r)).then((function(a){a.payload.success?e.history.push("/login"):alert(a.payload.err.errmsg)})),n(!1)}),500)}},(function(e){var a=e.values,t=e.touched,r=e.errors,s=(e.dirty,e.isSubmitting),l=e.handleChange,i=e.handleBlur,o=e.handleSubmit;e.handleReset;return n.a.createElement("div",{className:"app"},n.a.createElement("h2",null,"Sign up"),n.a.createElement(w.a,Object.assign({style:{minWidth:"375px"}},j,{onSubmit:o}),n.a.createElement(w.a.Item,{required:!0,label:"Name"},n.a.createElement(x.a,{id:"name",placeholder:"Enter your name",type:"text",value:a.name,onChange:l,onBlur:i,className:r.name&&t.name?"text-input error":"text-input"}),r.name&&t.name&&n.a.createElement("div",{className:"input-feedback"},r.name)),n.a.createElement(w.a.Item,{required:!0,label:"Last Name"},n.a.createElement(x.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:a.lastName,onChange:l,onBlur:i,className:r.lastName&&t.lastName?"text-input error":"text-input"}),r.lastName&&t.lastName&&n.a.createElement("div",{className:"input-feedback"},r.lastName)),n.a.createElement(w.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:r.email&&t.email?"error":"success"},n.a.createElement(x.a,{id:"email",placeholder:"Enter your Email",type:"email",value:a.email,onChange:l,onBlur:i,className:r.email&&t.email?"text-input error":"text-input"}),r.email&&t.email&&n.a.createElement("div",{className:"input-feedback"},r.email)),n.a.createElement(w.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:r.password&&t.password?"error":"success"},n.a.createElement(x.a,{id:"password",placeholder:"Enter your password",type:"password",value:a.password,onChange:l,onBlur:i,className:r.password&&t.password?"text-input error":"text-input"}),r.password&&t.password&&n.a.createElement("div",{className:"input-feedback"},r.password)),n.a.createElement(w.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},n.a.createElement(x.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:a.confirmPassword,onChange:l,onBlur:i,className:r.confirmPassword&&t.confirmPassword?"text-input error":"text-input"}),r.confirmPassword&&t.confirmPassword&&n.a.createElement("div",{className:"input-feedback"},r.confirmPassword)),n.a.createElement(w.a.Item,D,n.a.createElement(S.a,{onClick:o,type:"primary",disabled:s},"Submit"))))}))},q=t(577),P=q.a.SubMenu,T=q.a.ItemGroup;var B=function(e){return n.a.createElement(q.a,{mode:e.mode},n.a.createElement(q.a.Item,{key:"mail"},n.a.createElement("a",{href:"/"},"Home")),n.a.createElement(q.a.Item,{key:"chat"},n.a.createElement("a",{href:"/chat"},"Chat")),n.a.createElement(P,{title:n.a.createElement("span",null,"Blogs")},n.a.createElement(T,{title:"Item 1"},n.a.createElement(q.a.Item,{key:"setting:1"},"Option 1"),n.a.createElement(q.a.Item,{key:"setting:2"},"Option 2")),n.a.createElement(T,{title:"Item 2"},n.a.createElement(q.a.Item,{key:"setting:3"},"Option 3"),n.a.createElement(q.a.Item,{key:"setting:4"},"Option 4"))))};var L=Object(i.f)((function(e){var a=Object(p.d)((function(e){return e.user}));return a.userData&&!a.userData.isAuth?n.a.createElement(q.a,{mode:e.mode},n.a.createElement(q.a.Item,{key:"mail"},n.a.createElement("a",{href:"/login"},"Signin")),n.a.createElement(q.a.Item,{key:"app"},n.a.createElement("a",{href:"/register"},"Signup"))):n.a.createElement(q.a,{mode:e.mode},n.a.createElement(q.a.Item,{key:"logout"},n.a.createElement("a",{onClick:function(){u.a.get("".concat("/api/users","/logout")).then((function(a){200===a.status?e.history.push("/login"):alert("Log Out Failed")}))}},"Logout")))})),z=t(579);t(535);var A=function(){var e=Object(r.useState)(!1),a=Object(f.a)(e,2),t=a[0],s=a[1];return n.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},n.a.createElement("div",{className:"menu__logo"},n.a.createElement("a",{href:"/"},"Logo")),n.a.createElement("div",{className:"menu__container"},n.a.createElement("div",{className:"menu_left"},n.a.createElement(B,{mode:"horizontal"})),n.a.createElement("div",{className:"menu_rigth"},n.a.createElement(L,{mode:"horizontal"})),n.a.createElement(S.a,{className:"menu__mobile-button",type:"primary",onClick:function(){s(!0)}},n.a.createElement(N.a,{type:"align-right"})),n.a.createElement(z.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){s(!1)},visible:t},n.a.createElement(B,{mode:"inline"}),n.a.createElement(L,{mode:"inline"}))))};var F=function(){return n.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},n.a.createElement("p",null," Happy Chatting ",n.a.createElement(N.a,{type:"smile"})))},R=t(273),W=t(274),V=t(282),H=t(275),Y=t(284),X=t(573),U=t(574),J=t(276),G=t.n(J);var $=t(571),K=t(572),Q=t(100);var Z=function(e){return n.a.createElement("div",{style:{width:"100%"}},n.a.createElement($.a,{author:e.sender.name,avatar:n.a.createElement(K.a,{src:e.sender.image,alt:e.sender.name}),content:"uploads/"===e.message.substring(0,8)?"mp4"===e.message.substring(e.message.length-3,e.message.length)?n.a.createElement("video",{style:{maxWidth:"200px"},src:"http://localhost:5000/".concat(e.message),alt:"video",type:"video/mp4",controls:!0}):n.a.createElement("img",{style:{maxWidth:"200px"},src:"http://localhost:5000/".concat(e.message),alt:"img"}):n.a.createElement("p",null,e.message),datetime:n.a.createElement(Q.a,{title:_()().format("YYYY-MM-DD HH:mm:ss")},n.a.createElement("span",null,_()().fromNow()))}))},ee=t(280),ae=function(e){function a(){var e,t;Object(R.a)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(t=Object(V.a)(this,(e=Object(H.a)(a)).call.apply(e,[this].concat(s)))).state={chatMessage:""},t.hanleSearchChange=function(e){t.setState({chatMessage:e.target.value})},t.renderCards=function(){return t.props.chats.chats&&t.props.chats.chats.map((function(e){return n.a.createElement(Z,Object.assign({key:e._id},e))}))},t.onDrop=function(e){console.log(e);var a=new FormData;a.append("file",e[0]),u.a.post("api/chat/uploadfiles",a,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var a=e.data.url,r=t.props.user.userData._id,n=t.props.user.userData.name,s=t.props.user.userData.image,l=_()();t.socket.emit("Input Chat Message",{chatMessage:a,userId:r,userName:n,userImage:s,nowTime:l,type:"VideoOrImage"})}}))},t.submitChatMessage=function(e){e.preventDefault();var a=t.state.chatMessage,r=t.props.user.userData._id,n=t.props.user.userData.name,s=t.props.user.userData.image,l=_()();t.socket.emit("Input Chat Message",{chatMessage:a,userId:r,userName:n,userImage:s,nowTime:l,type:"Text"}),t.setState({chatMessage:""})},t}return Object(Y.a)(a,e),Object(W.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"get_chat",payload:u.a.get("".concat("/api/chat","/getChats")).then((function(e){return e.data}))}),this.socket=G()("http://localhost:5000"),this.socket.on("Output Chat Message",(function(a){console.log(a),e.props.dispatch({type:"after_post_message",payload:a})}))}},{key:"componentDidUpdate",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:"2rem",textAlign:"center"}}," Real Time Chat")),n.a.createElement("div",{style:{maxWidth:"800px",margin:"0 auto"}},n.a.createElement("div",{className:"infinite-container",style:{height:"500px",overflowY:"scroll"}},this.props.chats&&this.renderCards(),n.a.createElement("div",{ref:function(a){e.messagesEnd=a},style:{float:"left",clear:"both"}})),n.a.createElement(X.a,null,n.a.createElement(w.a,{layout:"inline",onSubmit:this.submitChatMessage},n.a.createElement(U.a,{span:18},n.a.createElement(x.a,{id:"message",prefix:n.a.createElement(N.a,{type:"message",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Let's start talking",type:"text",value:this.state.chatMessage,onChange:this.hanleSearchChange})),n.a.createElement(U.a,{span:2},n.a.createElement(ee.a,{onDrop:this.onDrop},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("section",null,n.a.createElement("div",a(),n.a.createElement("input",t()),n.a.createElement(S.a,null,n.a.createElement(N.a,{type:"upload"}))))}))),n.a.createElement(U.a,{span:4},n.a.createElement(S.a,{type:"primary",style:{width:"100%"},onClick:this.submitChatMessage,htmlType:"submit"},n.a.createElement(N.a,{type:"enter"})))))))}}]),a}(r.Component),te=Object(p.b)((function(e){return{user:e.user,chats:e.chat}}))(ae);var re=function(){return n.a.createElement(r.Suspense,{fallback:n.a.createElement("div",null,"Loading...")},n.a.createElement(A,null),n.a.createElement("div",{style:{paddingTop:"75px",minHeight:"calc(100vh - 80px)"}},n.a.createElement(i.c,null,n.a.createElement(i.a,{exact:!0,path:"/",component:h(E,null)}),n.a.createElement(i.a,{exact:!0,path:"/chat",component:h(te,!0)}),n.a.createElement(i.a,{exact:!0,path:"/login",component:h(k,!1)}),n.a.createElement(i.a,{exact:!0,path:"/register",component:h(M,!1)}))),n.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=t(96),se=t(70),le=t(59),ie=Object(se.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"register_user":return Object(le.a)({},e,{register:a.payload});case"login_user":return Object(le.a)({},e,{loginSucces:a.payload});case"auth_user":return Object(le.a)({},e,{userData:a.payload});case"logout_user":return Object(le.a)({},e);default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"get_chat":return Object(le.a)({},e,{chats:a.payload});case"after_post_message":return Object(le.a)({},e,{chats:e.chats.concat(a.payload)});default:return e}}}),oe=t(278),ce=t.n(oe),me=t(279),ue=Object(se.a)(ce.a,me.a)(se.d);l.a.render(n.a.createElement(p.a,{store:ue(ie,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},n.a.createElement(ne.a,null,n.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[287,1,2]]]);
//# sourceMappingURL=main.71188da9.chunk.js.map